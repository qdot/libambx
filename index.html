<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
    "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="generator" content="AsciiDoc 8.4.4" />
<title>AmbX Protocol Documentation</title>
<style type="text/css">
/* Debug borders */
p, li, dt, dd, div, pre, h1, h2, h3, h4, h5, h6 {
/*
  border: 1px solid red;
*/
}

body {
  margin: 1em 5% 1em 5%;
}

a {
  color: blue;
  text-decoration: underline;
}
a:visited {
  color: fuchsia;
}

em {
  font-style: italic;
  color: navy;
}

strong {
  font-weight: bold;
  color: #083194;
}

tt {
  color: navy;
}

h1, h2, h3, h4, h5, h6 {
  color: #527bbd;
  font-family: sans-serif;
  margin-top: 1.2em;
  margin-bottom: 0.5em;
  line-height: 1.3;
}

h1, h2, h3 {
  border-bottom: 2px solid silver;
}
h2 {
  padding-top: 0.5em;
}
h3 {
  float: left;
}
h3 + * {
  clear: left;
}

div.sectionbody {
  font-family: serif;
  margin-left: 0;
}

hr {
  border: 1px solid silver;
}

p {
  margin-top: 0.5em;
  margin-bottom: 0.5em;
}

ul, ol, li > p {
  margin-top: 0;
}

pre {
  padding: 0;
  margin: 0;
}

span#author {
  color: #527bbd;
  font-family: sans-serif;
  font-weight: bold;
  font-size: 1.1em;
}
span#email {
}
span#revision {
  font-family: sans-serif;
}

div#footer {
  font-family: sans-serif;
  font-size: small;
  border-top: 2px solid silver;
  padding-top: 0.5em;
  margin-top: 4.0em;
}
div#footer-text {
  float: left;
  padding-bottom: 0.5em;
}
div#footer-badges {
  float: right;
  padding-bottom: 0.5em;
}

div#preamble {
  margin-top: 1.5em;
  margin-bottom: 1.5em;
}
div.tableblock, div.imageblock, div.exampleblock, div.verseblock,
div.quoteblock, div.literalblock, div.listingblock, div.sidebarblock,
div.admonitionblock {
  margin-top: 1.5em;
  margin-bottom: 1.5em;
}
div.admonitionblock {
  margin-top: 2.5em;
  margin-bottom: 2.5em;
}

div.content { /* Block element content. */
  padding: 0;
}

/* Block element titles. */
div.title, caption.title {
  color: #527bbd;
  font-family: sans-serif;
  font-weight: bold;
  text-align: left;
  margin-top: 1.0em;
  margin-bottom: 0.5em;
}
div.title + * {
  margin-top: 0;
}

td div.title:first-child {
  margin-top: 0.0em;
}
div.content div.title:first-child {
  margin-top: 0.0em;
}
div.content + div.title {
  margin-top: 0.0em;
}

div.sidebarblock > div.content {
  background: #ffffee;
  border: 1px solid silver;
  padding: 0.5em;
}

div.listingblock > div.content {
  border: 1px solid silver;
  background: #f4f4f4;
  padding: 0.5em;
}

div.quoteblock {
  padding-left: 2.0em;
  margin-right: 10%;
}
div.quoteblock > div.attribution {
  padding-top: 0.5em;
  text-align: right;
}

div.verseblock {
  padding-left: 2.0em;
  margin-right: 10%;
}
div.verseblock > div.content {
  white-space: pre;
}
div.verseblock > div.attribution {
  padding-top: 0.75em;
  text-align: left;
}
/* DEPRECATED: Pre version 8.2.7 verse style literal block. */
div.verseblock + div.attribution {
  text-align: left;
}

div.admonitionblock .icon {
  vertical-align: top;
  font-size: 1.1em;
  font-weight: bold;
  text-decoration: underline;
  color: #527bbd;
  padding-right: 0.5em;
}
div.admonitionblock td.content {
  padding-left: 0.5em;
  border-left: 2px solid silver;
}

div.exampleblock > div.content {
  border-left: 2px solid silver;
  padding: 0.5em;
}

div.imageblock div.content { padding-left: 0; }
div.imageblock img { border: 1px solid silver; }
span.image img { border-style: none; }

dl {
  margin-top: 0.8em;
  margin-bottom: 0.8em;
}
dt {
  margin-top: 0.5em;
  margin-bottom: 0;
  font-style: normal;
  color: navy;
}
dd > *:first-child {
  margin-top: 0.1em;
}

ul, ol {
    list-style-position: outside;
}
ol.arabic {
  list-style-type: decimal;
}
ol.loweralpha {
  list-style-type: lower-alpha;
}
ol.upperalpha {
  list-style-type: upper-alpha;
}
ol.lowerroman {
  list-style-type: lower-roman;
}
ol.upperroman {
  list-style-type: upper-roman;
}

div.compact ul, div.compact ol,
div.compact p, div.compact p,
div.compact div, div.compact div {
  margin-top: 0.1em;
  margin-bottom: 0.1em;
}

div.tableblock > table {
  border: 3px solid #527bbd;
}
thead {
  font-family: sans-serif;
  font-weight: bold;
}
tfoot {
  font-weight: bold;
}
td > div.verse {
  white-space: pre;
}
p.table {
  margin-top: 0;
}
/* Because the table frame attribute is overriden by CSS in most browsers. */
div.tableblock > table[frame="void"] {
  border-style: none;
}
div.tableblock > table[frame="hsides"] {
  border-left-style: none;
  border-right-style: none;
}
div.tableblock > table[frame="vsides"] {
  border-top-style: none;
  border-bottom-style: none;
}


div.hdlist {
  margin-top: 0.8em;
  margin-bottom: 0.8em;
}
div.hdlist tr {
  padding-bottom: 15px;
}
dt.hdlist1.strong, td.hdlist1.strong {
  font-weight: bold;
}
td.hdlist1 {
  vertical-align: top;
  font-style: normal;
  padding-right: 0.8em;
  color: navy;
}
td.hdlist2 {
  vertical-align: top;
}
div.hdlist.compact tr {
  margin: 0;
  padding-bottom: 0;
}

.comment {
  background: yellow;
}

@media print {
  div#footer-badges { display: none; }
}

div#toctitle {
  color: #527bbd;
  font-family: sans-serif;
  font-size: 1.1em;
  font-weight: bold;
  margin-top: 1.0em;
  margin-bottom: 0.1em;
}

div.toclevel1, div.toclevel2, div.toclevel3, div.toclevel4 {
  margin-top: 0;
  margin-bottom: 0;
}
div.toclevel2 {
  margin-left: 2em;
  font-size: 0.9em;
}
div.toclevel3 {
  margin-left: 4em;
  font-size: 0.9em;
}
div.toclevel4 {
  margin-left: 6em;
  font-size: 0.9em;
}
/* Workarounds for IE6's broken and incomplete CSS2. */

div.sidebar-content {
  background: #ffffee;
  border: 1px solid silver;
  padding: 0.5em;
}
div.sidebar-title, div.image-title {
  color: #527bbd;
  font-family: sans-serif;
  font-weight: bold;
  margin-top: 0.0em;
  margin-bottom: 0.5em;
}

div.listingblock div.content {
  border: 1px solid silver;
  background: #f4f4f4;
  padding: 0.5em;
}

div.quoteblock-attribution {
  padding-top: 0.5em;
  text-align: right;
}

div.verseblock-content {
  white-space: pre;
}
div.verseblock-attribution {
  padding-top: 0.75em;
  text-align: left;
}

div.exampleblock-content {
  border-left: 2px solid silver;
  padding-left: 0.5em;
}

/* IE6 sets dynamically generated links as visited. */
div#toc a:visited { color: blue; }
</style>
<script type="text/javascript">
/*<![CDATA[*/
window.onload = function(){generateToc(2)}
/* Author: Mihai Bazon, September 2002
 * http://students.infoiasi.ro/~mishoo
 *
 * Table Of Content generator
 * Version: 0.4
 *
 * Feel free to use this script under the terms of the GNU General Public
 * License, as long as you do not remove or alter this notice.
 */

 /* modified by Troy D. Hanson, September 2006. License: GPL */
 /* modified by Stuart Rackham, October 2006. License: GPL */

function getText(el) {
  var text = "";
  for (var i = el.firstChild; i != null; i = i.nextSibling) {
    if (i.nodeType == 3 /* Node.TEXT_NODE */) // IE doesn't speak constants.
      text += i.data;
    else if (i.firstChild != null)
      text += getText(i);
  }
  return text;
}

function TocEntry(el, text, toclevel) {
  this.element = el;
  this.text = text;
  this.toclevel = toclevel;
}

function tocEntries(el, toclevels) {
  var result = new Array;
  var re = new RegExp('[hH]([2-'+(toclevels+1)+'])');
  // Function that scans the DOM tree for header elements (the DOM2
  // nodeIterator API would be a better technique but not supported by all
  // browsers).
  var iterate = function (el) {
    for (var i = el.firstChild; i != null; i = i.nextSibling) {
      if (i.nodeType == 1 /* Node.ELEMENT_NODE */) {
        var mo = re.exec(i.tagName)
        if (mo)
          result[result.length] = new TocEntry(i, getText(i), mo[1]-1);
        iterate(i);
      }
    }
  }
  iterate(el);
  return result;
}

// This function does the work. toclevels = 1..4.
function generateToc(toclevels) {
  var toc = document.getElementById("toc");
  var entries = tocEntries(document.getElementsByTagName("body")[0], toclevels);
  for (var i = 0; i < entries.length; ++i) {
    var entry = entries[i];
    if (entry.element.id == "")
      entry.element.id = "toc" + i;
    var a = document.createElement("a");
    a.href = "#" + entry.element.id;
    a.appendChild(document.createTextNode(entry.text));
    var div = document.createElement("div");
    div.appendChild(a);
    div.className = "toclevel" + entry.toclevel;
    toc.appendChild(div);
  }
  if (entries.length == 0)
    document.getElementById("header").removeChild(toc);
}
/*]]>*/
</script>
</head>
<body>
<div id="header">
<h1>AmbX Protocol Documentation</h1>
<span id="author">Kyle Machulis</span><br />
<span id="email"><tt>&lt;<a href="mailto:kyle@nonpolynomial.com">kyle@nonpolynomial.com</a>&gt;</tt></span><br />
<span id="revision">version 1.0,</span>
May 2 2009
<div id="toc">
  <div id="toctitle">Table of Contents</div>
  <noscript><p><b>JavaScript must be enabled in your browser to display the table of contents.</b></p></noscript>
</div>
</div>
<h2 id="_introduction">1. Introduction</h2>
<div class="sectionbody">
<div class="paragraph"><p>This document provides protocol information for the AmbX ambient
environment system, with a goal of providing developers with enough
low level information to developer their own drivers and software to
harness the AmbX protocol.</p></div>
<div class="paragraph"><p>Information on the AmbX product is available at the AmbX website:</p></div>
<div class="paragraph"><p><a href="http://www.ambx.com">http://www.ambx.com</a></p></div>
</div>
<h2 id="_device_information">2. Device information</h2>
<div class="sectionbody">
</div>
<h2 id="_protocol_information">3. Protocol Information</h2>
<div class="sectionbody">
<div class="paragraph"><p>The AmbX Communications protocol works over full-speed USB 2.0. It
addresses the system through simple bulk read/writes commands.</p></div>
<h3 id="_protocol_format">3.1. Protocol Format</h3><div style="clear:left"></div>
<div class="listingblock">
<div class="title">Protocol Example</div>
<div class="content">
<pre><tt>Index: 01 23 45 67 89 AB CD EF
 Data: A1 2B 03 00 00 00</tt></pre>
</div></div>
<div class="dlist"><dl>
<dt class="hdlist1">
Byte 0 - Nibble 0
</dt>
<dd>
<p>
This is a sequence that is monotonically increasing
and rolling over. It begins at 0 for the first command, 1 for the
second, etc&#8230; until 16 commands have been sent, then returns to
zero. In the above example packet, we have hit the 11th packet since
we rolled over, so the value is 0xA
</p>
</dd>
<dt class="hdlist1">
Byte 0 - Nibble 1
</dt>
<dd>
<p>
This value is significant, but it is not yet known what it is
</p>
</dd>
<dt class="hdlist1">
Byte 1 (Nibble 2-3)
</dt>
<dd>
<p>
This value is the address of the unit being commanded. In the example,
0x1B refers to the left lighting node of the wall washer unit.
</p>
</dd>
<dt class="hdlist1">
Byte 2 (Nibble 4-5)
</dt>
<dd>
<p>
This value is the command to send to the unit. In the example, 0x03 is
the command to set a light to a certain color
</p>
</dd>
<dt class="hdlist1">
All remaining bytes
</dt>
<dd>
<p>
Remaining bytes are parameters to the send command, and are specific
to the command. In the example, 0x00 0x00 0x00 means that the color to
be set in the left wall washer unit light is black.
</p>
</dd>
</dl></div>
</div>
<h2 id="_light_commands">4. Light Commands</h2>
<div class="sectionbody">
<h3 id="_set_light_to_color">4.1. Set Light To Color</h3><div style="clear:left"></div>
<h4 id="_description">4.1.1. Description</h4>
<div class="paragraph"><p>Given the address of a light, sets it to a certain RGB Color</p></div>
<h4 id="_setup_requirements">4.1.2. Setup Requirements</h4>
<div class="paragraph"><p>Unknown</p></div>
<h4 id="_command_index">4.1.3. Command Index</h4>
<div class="listingblock">
<div class="content">
<pre><tt>0x03</tt></pre>
</div></div>
<h4 id="_parameters">4.1.4. Parameters</h4>
<div class="paragraph"><p>3 bytes, denoting the values to set the red, green, and blue channels
to.</p></div>
<h4 id="_example_command">4.1.5. Example Command</h4>
<div class="listingblock">
<div class="content">
<pre><tt>Index: 01 23 45 67 89 AB
 Data: A1 2B 03 00 00 00</tt></pre>
</div></div>
<h3 id="_timed_color_sequence">4.2. Timed Color Sequence</h3><div style="clear:left"></div>
<h4 id="_description_2">4.2.1. Description</h4>
<div class="paragraph"><p>Given the address of a light and a delay value, iterate through a list
of colors, holding each color for the specified delay value.</p></div>
<h4 id="_setup_requirements_2">4.2.2. Setup Requirements</h4>
<div class="paragraph"><p>Unknown</p></div>
<h4 id="_command_index_2">4.2.3. Command Index</h4>
<div class="listingblock">
<div class="content">
<pre><tt>0x72</tt></pre>
</div></div>
<h4 id="_parameters_2">4.2.4. Parameters</h4>
<div class="paragraph"><p>Byte 3 (Nibbles 6-7) and 4 (Nibbles 8-9) denote the 16-bit delay time,
in milliseconds. After that, a list of 16 3-byte colors are sent.</p></div>
<h4 id="_example_command_2">4.2.5. Example Command</h4>
<div class="listingblock">
<div class="title">Full Command</div>
<div class="content">
<pre><tt>E1 2B 72 00 14 00 00 00 01 01 03 02 02 07 03 03
0A 04 05 0E 05 06 11 06 07 15 07 08 19 08 0A 1C
09 0B 20 0A 0C 23 0B 0E 27 0C 0F 2A 0E 10 2E 0F
11 32 10 13 35</tt></pre>
</div></div>
<div class="listingblock">
<div class="title">Command</div>
<div class="content">
<pre><tt>E1 2B 72 00 14</tt></pre>
</div></div>
<div class="paragraph"><p>This tells the left-most light to iterate through the following
16 colors, holding for 20ms at each color</p></div>
<div class="listingblock">
<div class="title">Color Portion</div>
<div class="content">
<pre><tt>00 00 00
01 01 03
02 02 07
03 03 0A
04 05 0E
05 06 11
06 07 15
07 08 19
08 0A 1C
09 0B 20
0A 0C 23
0B 0E 27
0C 0F 2A
0E 10 2E
0F 11 32
10 13 35</tt></pre>
</div></div>
</div>
<h2 id="_fan_commands">5. Fan Commands</h2>
<div class="sectionbody">
</div>
<h2 id="_rumble_commands">6. Rumble Commands</h2>
<div class="sectionbody">
</div>
<h2 id="_further_information">7. Further Information</h2>
<div class="sectionbody">
<div class="paragraph"><p>For further information, visit:</p></div>
<div class="ulist"><ul>
<li>
<p>
<a href="http://www.github.com/qdot/libambx/">libambx github repo site</a>
</p>
</li>
<li>
<p>
<a href="http://electrosthetics.blogspot.com/">Electrosthetics</a>
</p>
</li>
<li>
<p>
<a href="http://www.nonpolynomial.com/">Nonpolynomial Labs</a>
</p>
</li>
</ul></div>
</div>
<div id="footer">
<div id="footer-text">
Version 1.0<br />
Last updated 2009-05-02 20:48:59 PDT
</div>
</div>
</body>
</html>
